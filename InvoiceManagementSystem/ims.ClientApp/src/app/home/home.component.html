<!-- start page title -->
<div class="row">
  <div class="col-12">
    <div class="page-title-box d-sm-flex align-items-center justify-content-between">
      <h4 class="mb-sm-0">Dashboard</h4>
      <div class="page-title-right">
        <ol class="breadcrumb m-0">
          <li class="breadcrumb-item"><a href="javascript: void(0);">Dashboard</a></li>
          <li class="breadcrumb-item active">Dashboard</li>
        </ol>
      </div>
    </div>
  </div>
</div>
<!-- end page title -->

<!-- quick module overview -->
<div class="row g-3 mb-3">
  <div class="col-xl-3 col-lg-4 col-md-6" *ngFor="let link of quickLinks">
    <a [routerLink]="link.route" class="card h-100 text-decoration-none">
      <div class="card-body d-flex align-items-center gap-3">
        <div class="avatar-sm flex-shrink-0 rounded-circle d-inline-flex align-items-center justify-content-center text-white bg-{{link.tone}}">
          <i class="{{link.icon}} fs-20"></i>
        </div>
        <div class="flex-grow-1">
          <h5 class="mb-1 text-body">{{ link.title }}</h5>
          <p class="mb-0 text-muted fs-13">{{ link.description }}</p>
        </div>
      </div>
    </a>
  </div>
</div>

<!-- overview metrics -->
<div class="row g-3 mb-4" *ngIf="metrics">
  <div class="col-xl-3 col-lg-4 col-md-6">
    <div class="card h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h6 class="text-uppercase text-muted fs-12 mb-0">Invoices</h6>
          <span class="badge bg-primary-subtle text-primary">{{ metrics.totalInvoices || 0 }}</span>
        </div>
        <div class="d-flex justify-content-between text-muted fs-13"><span>Paid</span><span class="text-success fw-semibold">{{ metrics.paidInvoices || 0 }}</span></div>
        <div class="d-flex justify-content-between text-muted fs-13"><span>Unpaid</span><span class="text-warning fw-semibold">{{ metrics.unpaidInvoices || 0 }}</span></div>
        <div class="d-flex justify-content-between text-muted fs-13"><span>Overdue</span><span class="text-danger fw-semibold">{{ metrics.overdueInvoices || 0 }}</span></div>
      </div>
    </div>
  </div>
  <div class="col-xl-3 col-lg-4 col-md-6">
    <div class="card h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h6 class="text-uppercase text-muted fs-12 mb-0">Revenue</h6>
          <span class="badge bg-success-subtle text-success">{{ formatCurrency(metrics.totalRevenue || 0) }}</span>
        </div>
        <div class="text-muted fs-13 d-flex justify-content-between"><span>Collected</span><span class="fw-semibold text-success">{{ formatCurrency(metrics.paidRevenue || 0) }}</span></div>
        <div class="text-muted fs-13 d-flex justify-content-between"><span>Outstanding</span><span class="fw-semibold text-warning">{{ formatCurrency(metrics.outstandingRevenue || 0) }}</span></div>
        <div class="text-muted fs-13 d-flex justify-content-between"><span>This Month</span><span class="fw-semibold text-primary">{{ formatCurrency(metrics.monthlyRevenue || 0) }}</span></div>
      </div>
    </div>
  </div>
  <div class="col-xl-3 col-lg-4 col-md-6">
    <div class="card h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h6 class="text-uppercase text-muted fs-12 mb-0">Customers</h6>
          <span class="badge bg-info-subtle text-info">{{ metrics.totalCustomers || 0 }}</span>
        </div>
        <div class="text-muted fs-13 d-flex justify-content-between"><span>Active</span><span class="fw-semibold text-success">{{ metrics.activeCustomers || 0 }}</span></div>
        <div class="text-muted fs-13 d-flex justify-content-between"><span>Recent invoices</span><span class="fw-semibold">{{ metrics.recentInvoices.length || 0 }}</span></div>
      </div>
    </div>
  </div>
  <div class="col-xl-3 col-lg-4 col-md-6">
    <div class="card h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h6 class="text-uppercase text-muted fs-12 mb-0">Products</h6>
          <span class="badge bg-secondary-subtle text-secondary">{{ metrics.totalProducts || 0 }}</span>
        </div>
        <div class="text-muted fs-13 d-flex justify-content-between"><span>Low stock</span><span class="fw-semibold text-danger">{{ metrics.lowStockProducts || 0 }}</span></div>
        <div class="text-muted fs-13 d-flex justify-content-between"><span>Invoices this month</span><span class="fw-semibold">{{ metrics.monthlyInvoices || 0 }}</span></div>
      </div>
    </div>
  </div>
</div>

<!-- reports & insights -->
<div class="row g-3">
  <div class="col-xl-4 col-lg-6" *ngFor="let report of reportLinks">
    <a [routerLink]="report.route" class="card h-100 text-decoration-none">
      <div class="card-body d-flex gap-3 align-items-start">
        <div class="avatar-sm flex-shrink-0 rounded-circle d-inline-flex align-items-center justify-content-center text-white bg-{{report.tone}}">
          <i class="{{report.icon}} fs-20"></i>
        </div>
        <div class="flex-grow-1">
          <div class="d-flex justify-content-between align-items-start mb-1">
            <h5 class="mb-0 text-body">{{ report.title }}</h5>
            <span class="badge bg-light text-body">{{ getMetricValue(report) }}</span>
          </div>
          <p class="text-muted fs-13 mb-1">{{ report.description }}</p>
          <div class="text-muted fs-12">Report type: {{ report.reportType }}</div>
        </div>
      </div>
    </a>
  </div>
</div>
