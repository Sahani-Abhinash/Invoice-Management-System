<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Branches</h2>
    <button class="btn btn-primary" (click)="createBranch()">Add Branch</button>
  </div>

  <!-- Search and Filter Section -->
  <app-table-controls
    [searchText]="tableManager.getSearchText()"
    searchPlaceholder="Search by name, address, or city..."
    [pageSize]="tableManager.getPageSize()"
    [totalRecords]="tableManager.getTotalRecords()"
    (searchChange)="onSearch($event)"
    (pageSizeChange)="tableManager.setPageSize($event)">
  </app-table-controls>

  <div *ngIf="tableManager.getDisplayData().length === 0 && tableManager.getTotalRecords() === 0" class="alert alert-info">
    No branches found. Click "Add Branch" to create one.
  </div>

  <div class="card" *ngIf="tableManager.getDisplayData().length > 0">
    <div class="table-responsive">
      <table class="table table-striped table-hover mb-0">
        <thead class="table-light">
          <tr>
            <th class="cursor-pointer" (click)="onSort('name')" style="cursor: pointer;">
              Name
              <i *ngIf="tableManager.getSortColumn() === 'name'" 
                [class]="'las ' + (tableManager.getSortDirection() === 'asc' ? 'la-arrow-up' : 'la-arrow-down') + ' ms-1'"></i>
            </th>
            <th class="cursor-pointer" (click)="onSort('address')" style="cursor: pointer;">
              Address
              <i *ngIf="tableManager.getSortColumn() === 'address'" 
                [class]="'las ' + (tableManager.getSortDirection() === 'asc' ? 'la-arrow-up' : 'la-arrow-down') + ' ms-1'"></i>
            </th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let branch of tableManager.getDisplayData()">
            <td><strong>{{ branch.name }}</strong></td>
            <td>{{ address(branch) }}</td>
            <td>
              <button class="btn btn-sm btn-info me-2" (click)="editBranch(branch.id)">
                <i class="las la-edit me-1"></i> Edit
              </button>
              <button class="btn btn-sm btn-danger" (click)="deleteBranch(branch.id)">
                <i class="las la-trash me-1"></i> Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination Section -->
    <app-table-pagination [tableManager]="tableManager"></app-table-pagination>
  </div>
